<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QA FlashCards</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- TOPBAR -->
<div id="topbar">
  <button id="menuBtn" onclick="toggleSidebar()">â˜°</button>
  <div class="logo">F</div>
  <div class="ttxt">
    <div class="ttitle" id="appTitle">QA FlashCards</div>
    <div class="tsub" id="appSub">Study Cards Â· Flashcard App</div>
  </div>
  <div class="langbox">
    <button data-lang="de" onclick="setLang('de')">DE</button>
    <button data-lang="en" class="active" onclick="setLang('en')">EN</button>
  </div>
</div>

<!-- LAYOUT -->
<div id="layout">

  <!-- SIDEBAR -->
  <div id="sidebar">
    <div class="sbhead">
      <span class="sblabel" id="lTopics">Topics</span>
      <button class="ic-btn ib-ghost" id="btnImport" onclick="openImport()">ğŸ“¥</button>
      <button class="ic-btn ib-ghost" id="btnExportAll" onclick="exportAll()">ğŸ“¤</button>
      <button class="ic-btn ib-blue" onclick="openNewTopic()">+</button>
    </div>
    <div class="sbsearch">
      <input id="searchGlobal" placeholder="Global Searchâ€¦" oninput="renderTopics()">
    </div>
    <div class="sblist" id="topicsList"></div>
    <div class="sbhead" id="sbheadLib" style="border-top:1px solid #293643;margin-top:10px">
      <span class="sblabel" id="lLibrary">Library</span>
    </div>
    <div class="sblist" id="libList"></div>
    <div class="sbfoot">
      <button class="btn bg bsm bfull" id="btnExportTopic" style="display:none" onclick="exportCurrent()">
        ğŸ“¤ <span id="lExportTopic">Export topic</span>
      </button>
    </div>
  </div>

  <!-- MAIN -->
  <div id="main">

    <!-- EMPTY -->
    <div id="emptyState">
      <div class="eico">ğŸ“š</div>
      <div class="etitle" id="lWelcome">Welcome!</div>
      <div class="edesc" id="lWelcomeDesc">Create a topic on the left or import a JSON file.</div>
    </div>

    <!-- TOPIC VIEW -->
    <div id="topicView">
      <div class="thdr">
        <div class="thdr-name" id="thdrName"></div>
        <div class="thdr-meta" id="thdrMeta"></div>
        <div class="thdr-search">
          <input id="searchLocal" placeholder="Search in topicâ€¦" oninput="renderCards()">
        </div>
        <button class="btn bg bsm" onclick="openRename()">âœï¸ <span id="lRename">Rename</span></button>
      </div>
      <div class="tabbar">
        <button class="active" data-tab="practice" onclick="switchTab('practice')">ğŸ¯ <span id="lTabPractice">Practice</span></button>
        <button data-tab="cards" onclick="switchTab('cards')">ğŸ—‚ <span id="lTabCards">Edit</span></button>
      </div>

      <!-- PRACTICE -->
      <div class="pane on" id="panePractice">
        <div class="pwrap" id="pracWrap"></div>
      </div>

      <!-- CARDS -->
      <div class="pane" id="paneCards">
        <div class="cscroll">
          <div class="addsec">
            <button class="addtog" id="addToggle" onclick="toggleAdd()">
              <span class="arr">â–¶</span>
              <span id="lAddCard">+ Add new card</span>
            </button>
            <div class="addbody" id="addBody">
              <div class="frow">
                <div class="fg">
                  <label style="display:flex;align-items:center;justify-content:space-between">
                    <span id="lQuestion">Question</span>
                    <button class="cta" title="Image" style="width:auto;height:auto;padding:2px 5px" onclick="pickImg('inpQ')">ğŸ–¼ï¸</button>
                  </label>
                  <textarea class="fta" id="inpQ" rows="3"></textarea>
                  <div id="preQ" class="ipre"></div>
                </div>
                <div class="fg">
                  <label style="display:flex;align-items:center;justify-content:space-between">
                    <span id="lAnswer">Answer</span>
                    <button class="cta" title="Image" style="width:auto;height:auto;padding:2px 5px" onclick="pickImg('inpA')">ğŸ–¼ï¸</button>
                  </label>
                  <textarea class="fta" id="inpA" rows="3"></textarea>
                  <div id="preA" class="ipre"></div>
                </div>
              </div>
              <div class="frow" style="margin-top:10px">
                <div class="fg">
                  <label id="lArea">Area</label>
                  <input class="fi" id="inpArea" placeholder="e.g. Database, ERM...">
                </div>
              </div>
              <div class="factions">
                <button class="btn bg bsm" onclick="clearCard()"><span id="lClear">Clear</span></button>
                <button class="btn bp bsm" onclick="saveCard()">ğŸ’¾ <span id="lSaveCard">Save card</span></button>
              </div>
            </div>
          </div>
          <div class="cgrid" id="cardsGrid"></div>
        </div>
      </div>
    </div><!-- /topicView -->

  </div><!-- /main -->
</div><!-- /layout -->

<input type="file" id="imgUpload" accept="image/*" style="display:none" onchange="onImgSelected(event)">

<!-- FOOTER -->
<div id="footer">
  <svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  <a href="https://github.com/drofji/qa-flashcards" target="_blank" rel="noopener">QA Flashcards 2026</a>
</div>

<!-- MODALS -->
<div class="overlay" id="mNewTopic">
  <div class="modal">
    <div class="mtitle" id="lNewTopicTitle">New Topic</div>
    <div class="fg" style="margin-bottom:12px">
      <label id="lTopicName">Topic name</label>
      <input class="fi" id="inpTopicName" onkeydown="if(event.key==='Enter')createTopic()">
    </div>
    <div class="fg">
      <label id="lTopicColor">Color</label>
      <div class="cldots" id="colorRow"></div>
    </div>
    <div class="macts">
      <button class="btn bg" onclick="closeModal('mNewTopic')"><span id="lCancel">Cancel</span></button>
      <button class="btn bp" onclick="createTopic()">âœ“ <span id="lCreate">Create</span></button>
    </div>
  </div>
</div>

<div class="overlay" id="mRename">
  <div class="modal">
    <div class="mtitle" id="lRenameTitle">Rename Topic</div>
    <div class="fg">
      <label id="lNewName">New name</label>
      <input class="fi" id="inpRename" onkeydown="if(event.key==='Enter')doRename()">
    </div>
    <div class="macts">
      <button class="btn bg" onclick="closeModal('mRename')"><span id="lCancelR">Cancel</span></button>
      <button class="btn bp" onclick="doRename()">âœ“ <span id="lSave">Save</span></button>
    </div>
  </div>
</div>

<div class="overlay" id="mDelete">
  <div class="modal">
    <div class="mtitle" id="lDeleteTitle">Delete Topic?</div>
    <div class="mdesc" id="lDeleteDesc">This cannot be undone. All cards will be deleted.</div>
    <div class="macts">
      <button class="btn bg" onclick="closeModal('mDelete')"><span id="lCancelD">Cancel</span></button>
      <button class="btn bd" onclick="deleteTopic()">ğŸ—‘ <span id="lDelete">Delete</span></button>
    </div>
  </div>
</div>

<div class="overlay" id="mImport">
  <div class="modal">
    <div class="mtitle" id="lImportTitle">Import Topics</div>
    <div class="itabs">
      <button class="itab active" data-itab="file" onclick="switchItab('file')">ğŸ“„ <span id="iTabFile">File</span></button>
      <button class="itab" data-itab="url"  onclick="switchItab('url')">ğŸ”— URL</button>
      <button class="itab" data-itab="paste" onclick="switchItab('paste')">ğŸ“‹ JSON</button>
    </div>
    <div id="ipFile">
      <div class="mdesc" id="lImportFileDesc">Select a JSON file with exported topics.</div>
      <input type="file" accept=".json" id="fileInput" style="display:none" onchange="onFileChange(event)">
      <button class="btn bg bfull" onclick="document.getElementById('fileInput').click()">ğŸ“‚ <span id="lChooseFile">Choose file</span></button>
      <div id="fileNameDisplay" style="margin-top:8px;font-size:12px;color:#7d9bbf;text-align:center"></div>
    </div>
    <div id="ipUrl" style="display:none">
      <div class="mdesc" id="lImportUrlDesc">Enter a JSON URL.</div>
      <div class="fg"><label>URL</label><input class="fi" id="inpUrl" placeholder="https://example.com/cards.json"></div>
    </div>
    <div id="ipPaste" style="display:none">
      <div class="fg">
        <label>JSON</label>
        <textarea class="fta" id="inpPaste" style="min-height:110px;font-family:'JetBrains Mono',monospace;font-size:12px" placeholder='[{"name":"Topic","cards":[{"q":"Q","a":"A"}]}]'></textarea>
      </div>
    </div>
    <div class="macts">
      <button class="btn bg" onclick="closeModal('mImport')"><span id="lCancelI">Cancel</span></button>
      <button class="btn bp" onclick="doImport()">ğŸ“¥ <span id="lDoImport">Import</span></button>
    </div>
  </div>
</div>

<div class="overlay" id="mEditCard">
  <div class="modal">
    <div class="mtitle" id="lEditCardTitle">Edit Card</div>
    <div class="fg" style="margin-bottom:12px">
      <label style="display:flex;align-items:center;justify-content:space-between">
        <span id="lEditQ">Question</span>
        <button class="cta" title="Image" style="width:auto;height:auto;padding:2px 5px" onclick="pickImg('inpEditQ')">ğŸ–¼ï¸</button>
      </label>
      <textarea class="fta" id="inpEditQ" rows="3"></textarea>
      <div id="preEditQ" class="ipre"></div>
    </div>
    <div class="fg" style="margin-bottom:12px">
      <label style="display:flex;align-items:center;justify-content:space-between">
        <span id="lEditA">Answer</span>
        <button class="cta" title="Image" style="width:auto;height:auto;padding:2px 5px" onclick="pickImg('inpEditA')">ğŸ–¼ï¸</button>
      </label>
      <textarea class="fta" id="inpEditA" rows="3"></textarea>
      <div id="preEditA" class="ipre"></div>
    </div>
    <div class="fg">
      <label id="lArea">Area</label>
      <input class="fi" id="inpEditArea">
    </div>
    <div class="macts">
      <button class="btn bg" onclick="closeModal('mEditCard')"><span id="lCancelE">Cancel</span></button>
      <button class="btn bp" onclick="saveEdit()">ğŸ’¾ <span id="lSaveE">Save</span></button>
    </div>
  </div>
</div>

<div class="overlay" id="mZoom">
  <div class="modal" style="width:auto;max-width:95vw;max-height:95vh;padding:12px;background:rgba(23,33,43,0.9);display:flex;flex-direction:column;align-items:center">
    <img id="zoomImg" style="max-width:100%;max-height:80vh;object-fit:contain;border-radius:8px">
    <div class="macts" style="margin-top:12px;width:100%;justify-content:center">
      <button class="btn bg" onclick="closeModal('mZoom')">âœ• Close</button>
    </div>
  </div>
</div>

<div id="toasts"></div>

<script src="js/app.js"></script>

</body>
</html>
